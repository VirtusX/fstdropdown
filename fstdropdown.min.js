function setFstDropdown(){var e=document.querySelectorAll(".fstdropdown-select:not(.fstcreated)");for(var t in e)e.hasOwnProperty(t)&&s(e[t]);function s(e){var t=e.dataset.searchdisable,s=e.dataset.placeholder,a=e.dataset.opened,r=d("div","fstdiv",e.parentNode,null),i=d("div","fstdropdown"+(null!=a&&"true"==a?" open":""),r,null==a||"true"!=a?{click:l,blur:l}:null);if(i.select=e,i.setAttribute("tabindex","0"),null!=a&&"true"==a||d("div","fstselected",i,null),null==t||"true"!=t){var u=d("div","fstsearch",i,null),p={keyup:o,paste:o};null!=a&&"true"==a||(p.blur=l),d("input","fstsearchinput",u,p).placeholder=null!=s?s:""}if(e.multiple){var f=d("button","fstAll",i,{click:c});f.textContent="Select All",f.type="button",f.selected=!1}d("div","fstlist",i,null),e.fstdropdown={dd:i,rebind:function(){n(e)}},n(e),e.classList.add("fstcreated")}function l(e,t,s){var l=e.target.classList.contains("fstdropdown")?e.target.select:e.target.closest(".fstdropdown").select;t=null==t?"blur"!=e.type:t;var a=l.fstdropdown.dd;if(!(null!=e.relatedTarget&&("INPUT"==e.relatedTarget.tagName||"BUTTON"==e.relatedTarget.tagName&&null==s)||"INPUT"==e.target.tagName&&"blur"!=e.type||"INPUT"==e.target.tagName&&null!=e.relatedTarget&&"fstdropdown open"==e.relatedTarget.className||e.target.classList.contains("fstselected")&&"blur"==e.type&&document.activeElement.classList.contains("fstsearchinput")||"blur"==e.type&&("fstlist"==document.activeElement.className||"fstAll"==document.activeElement.className)||"BUTTON"==e.target.tagName&&null==s)){if(!t||a.classList.contains("open"))return a.classList.remove("open"),void a.parentNode.classList.remove("open");a.classList.add("open"),a.parentNode.classList.add("open"),null==l.dataset.searchdisable&&"true"!=l.dataset.searchdisable&&a.querySelector(".fstsearchinput").focus()}}function a(e){var t=e.target.closest(".fstdropdown").select,s=t.fstdropdown.dd,a=s.querySelector(".fstAll"),n=null==t.dataset.opened||"true"!=t.dataset.opened;if(t.value==e.target.dataset.value||t.multiple||(t.value=e.target.dataset.value,null!=s.querySelector(".fstlist>.selected")&&s.querySelector(".fstlist>.selected").classList.remove("selected"),e.target.classList.add("selected"),n&&(s.querySelector(".fstselected").textContent=e.target.textContent),r("change",t)),t.multiple){t.querySelector("[value='"+e.target.dataset.value+"']").selected=!e.target.classList.contains("selected"),e.target.classList.contains("selected")?e.target.classList.remove("selected"):e.target.classList.add("selected"),r("change",t);var o=s.querySelectorAll(".fstlist>.selected").length;a.selected=o>0,n&&(s.querySelector(".fstselected").textContent=1==o?e.target.textContent:o+" options selected"),a.textContent=a.selected?"Deselect All":"Select All"}n&&l(e,!1)}function n(e){for(var t=e.querySelectorAll("option"),s=e.fstdropdown.dd.querySelector(".fstlist");s.lastChild;)s.removeChild(s.lastChild);for(var l in t)if(t.hasOwnProperty(l)){var n=document.createElement("div");n.textContent=t[l].text,n.dataset.value=t[l].value,t[l].selected&&n.classList.add("selected"),n.addEventListener("click",a),s.appendChild(n)}if(null==e.dataset.opened||"true"!=e.dataset.opened){var r="",o=e.options[e.selectedIndex];if(e.multiple){var d=0;for(var c in e.options)e.options.hasOwnProperty(c)&&1==e.options[c].selected&&d++;r=1==d?o.text:d+" options selected"}e.fstdropdown.dd.querySelector(".fstselected").textContent=e.multiple?r:null!=o?o.text:""}}function r(e,t){var s;"function"==typeof Event?s=new Event(e,{bubbles:!0}):(s=document.createEvent("Event")).initEvent(e,!0,!0),t.dispatchEvent(s)}function o(e){var t="paste"!=e.type?"":void 0===e.clipboardData?window.clipboardData.getData("Text"):e.clipboardData.getData("text/plain"),s="paste"!=e.type?e.target.value:t,l=e.target.closest(".fstdropdown").querySelectorAll(".fstlist>div");for(var a in l)l.hasOwnProperty(a)&&(-1!=l[a].textContent.trim().toLowerCase().indexOf(s.trim().toLowerCase())?l[a].classList.remove("hideFst"):l[a].classList.add("hideFst"))}function d(e,t,s,l){var a=document.createElement(e);if(null!=t)for(var n in t.split(" "))a.classList.add(t.split(" ")[n]);if(null!=l)for(var r in l)l.hasOwnProperty(r)&&a.addEventListener(r,l[r],!0);return s.appendChild(a),a}function c(e){var t=e.target.closest(".fstdropdown").select,s=t.fstdropdown.dd,a=!e.target.selected;e.target.selected=a;var n=a?s.querySelectorAll(".fstlist>div:not(.hideFst)"):s.querySelectorAll(".selected");for(var o in n)n.hasOwnProperty(o)&&(t.querySelector("[value='"+n[o].dataset.value+"']").selected=a,a?n[o].classList.add("selected"):n[o].classList.remove("selected"));if(r("change",t),e.target.textContent=a?"Deselect All":"Select All",null==t.dataset.opened||"true"!=t.dataset.opened){var d="";a=t.options[t.selectedIndex];if(t.multiple){var c=0;for(var i in t.options)t.options.hasOwnProperty(i)&&1==t.options[i].selected&&c++;d=1==c?a.text:c+" options selected"}t.fstdropdown.dd.querySelector(".fstselected").textContent=t.multiple?d:null!=a?a.text:"",l(e,!1,!0)}}}!function(e){e.matches=e.matches||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector,e.closest=e.closest||function(e){return this&&(this.parentElement||this.matches(e))?this.matches(e)?this:this.parentElement.closest(e):null}}(Element.prototype),document.addEventListener("DOMContentLoaded",setFstDropdown);